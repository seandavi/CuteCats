<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Making the CuteCats package • CuteCats</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Making the CuteCats package">
<meta property="og:description" content="CuteCats">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CuteCats</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/00_usage.html">Advanced Usage of the CuteCats Package</a>
    </li>
    <li>
      <a href="../articles/create_the_package.html">Making the CuteCats package</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Making the CuteCats package</h1>
                        <h4 data-toc-skip class="author">Sean Davis</h4>
            
            <h4 data-toc-skip class="date">2022-07-13</h4>
      
      
      <div class="hidden name"><code>create_the_package.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="why-an-r-package">Why an R package?<a class="anchor" aria-label="anchor" href="#why-an-r-package"></a>
</h2>
<p>Organizing code, data, and thoughts (via documentation and vignettes)
for your own analysis does not necessarily require an R package.
However, you may want to share your materials, analysis, data, and
functions with your future self or others. Hadley Wickham envisions an R
package <a href="ttp://adv-r.had.co.nz/Philosophy.html">as the easiest
way to do so</a>.</p>
<p>R packages contain provenance (who wrote it, when, etc.), data, R
code, documentation, tests, and really almost any other files important
to the functionality of the package. Packages are installable, reusable,
shareable, versioned, and extensible.</p>
<p>It is not about making a beautiful, perfect R package. The idea is
about creating a bare-minimum R package so that you don’t have to keep
thinking to yourself, “I really should just make an R package with these
functions so I don’t have to keep copy/pasting them.” It isn’t all about
sharing sharing your code, although it is easy to do once you have an R
package. It is about saving yourself time and serving as an external
brain for your code and analysis.</p>
</div>
<div class="section level2">
<h2 id="what-is-an-r-package">What is an R package?<a class="anchor" aria-label="anchor" href="#what-is-an-r-package"></a>
</h2>
<p>The simplest R package is a directory with a file called
<code>DESCRIPTION</code> (all caps, no suffix). In addition, a package
usually has an <code>R</code> directory that contains R functions in
files. Additional, optional folders and files serve other purposes. A
<code>data</code> folder allows for data of specific types of files
(csv, rda). The <code>inst</code> directory will be added to the package
when it is installed; this is a good place to add supplementary files
that are needed for a package but that don’t fit in the
<code>data</code> folder.</p>
<p>The files in a cute little <em>PANDA</em> package might look
like:</p>
<pre><code>├── DESCRIPTION
├── NAMESPACE
├── R
│   ├── cute_panda.R
│   └── eucalyptus.R
├── abc.Rproj
├── data
│   └── panda.csv
└── inst
    └── ext_images
        ├── baby_panda.png
        └── mommy_panda.png</code></pre>
</div>
<div class="section level2">
<h2 id="how-do-i-create-an-r-package">How do I create an R package?<a class="anchor" aria-label="anchor" href="#how-do-i-create-an-r-package"></a>
</h2>
<div class="section level3">
<h3 id="step-0-install-needed-pacakges">Step 0: Install needed pacakges<a class="anchor" aria-label="anchor" href="#step-0-install-needed-pacakges"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/BiocManager/man/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/BiocManager/man/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"roxygen2"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-1-create-a-skeleton-r-package">Step 1: Create a skeleton R package<a class="anchor" aria-label="anchor" href="#step-1-create-a-skeleton-r-package"></a>
</h3>
<p>The <code>devtools</code> package contains lots of helpers for R
package development. The first function from that package we use is the
<code>create</code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/create.html" class="external-link">create</a></span><span class="op">(</span><span class="st">"CuteCats"</span><span class="op">)</span></span></code></pre></div>
<p>After executing, the <code>CuteCats</code> directory will contain a
few files new files:</p>
<pre><code>├── CuteCats.Rproj 
├── DESCRIPTION
├── NAMESPACE
└── R</code></pre>
</div>
<div class="section level3">
<h3 id="step-2-edit-the-description-file">Step 2: Edit the DESCRIPTION file<a class="anchor" aria-label="anchor" href="#step-2-edit-the-description-file"></a>
</h3>
<p>The <code>DESCRIPTION</code> file looks something like:</p>
<pre><code>Package: CuteCats
Title: What the Package Does (One Line, Title Case)
Version: 0.0.0.9000
Authors@R: 
    person("First", "Last", , "first.last@example.com", role = c("aut", "cre"),
           comment = c(ORCID = "YOUR-ORCID-ID"))
Description: What the package does (one paragraph).
License: `use_mit_license()`, `use_gpl3_license()` or friends to pick a
    license
Encoding: UTF-8
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.2.0</code></pre>
<p>Edit this file according to the short documentation. It is just a
text file, so edit it in RStudio works just fine.</p>
</div>
<div class="section level3">
<h3 id="step-3-add-functions">Step 3: Add functions<a class="anchor" aria-label="anchor" href="#step-3-add-functions"></a>
</h3>
<p>We can include functions in our package by writing them and then
saving them in the <code>R</code> directory. A file can contain one or
more functions. The names of the files don’t matter much, but the file
must end with <code>.R</code>.</p>
<p>For example, open a new R script in RStudio and create the
<code><a href="../reference/love_cats.html">love_cats()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">love_cats</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">love</span><span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="va">love</span><span class="op">==</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"I love cats!"</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="kw">else</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"I am not a cool person."</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>For our second function, let’s take advantage of the presence of the
cute kitten that graced us with its presence during the CSHL course in
2022. This function is going to display a photo of the Hooper House
kitten. Create a new R script file in RStudio and add the
<code>hooper_kitten</code> to it.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hooper_kitten</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">file_loc</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'images/hooper_kitten.png'</span>, package<span class="op">=</span><span class="st">'CuteCats'</span><span class="op">)</span></span>
<span>    <span class="va">pic</span> <span class="op">=</span> <span class="fu">png</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html" class="external-link">readPNG</a></span><span class="op">(</span><span class="va">file_loc</span><span class="op">)</span></span>
<span>    <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.raster.html" class="external-link">grid.raster</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Save the function as <code>hooper.R</code> in the <code>R</code>
directory.</p>
<p>Note that this function requires two new packages, the
<code>png</code> package and the <code>grid</code> package. We tell R
that our package needs these two packages by adding the following to our
<code>DESCRIPTION</code> file below the <code>License</code> line (see
above).</p>
<pre><code>Imports: png, grid</code></pre>
<p>By doing so, when people install our R package, the <code>png</code>
and <code>grid</code> packages will also be installed if needed.</p>
</div>
<div class="section level3">
<h3 id="step-4-add-data-and-other-files">Step 4: Add data and other files<a class="anchor" aria-label="anchor" href="#step-4-add-data-and-other-files"></a>
</h3>
<p>Lets add our cat picture to our package. We will create a new
directory in our package called <code>inst/images</code> and put our cat
picture in there, calling it <code>hooper_kitten.png</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="st">'inst/images'</span>, recursive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>And to add our cat picture:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="st">'https://github.com/seandavi/CuteCats/raw/main/inst/images/hooper_kitten.png'</span>, destfile<span class="op">=</span><span class="st">'inst/images/hooper_kitten.png'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-5-document-functions">Step 5: Document functions<a class="anchor" aria-label="anchor" href="#step-5-document-functions"></a>
</h3>
<p>Adding documentation to functions is really important for you, your
future self, and anyone you share your functions and package with. Doing
so looks intimidating at first, but once you do it a couple of times, it
is pretty straightforward. The approach most people use these days is to
document functions using the <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html" class="external-link">roxygen
package</a>.</p>
<p>Edit your <code>love_cats</code> function file to look like:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Do you love cats?</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' This function allows you to express your love of cats.</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' @param love Do you love cats? Defaults to TRUE.</span></span>
<span><span class="co">#' @keywords cats</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' love_cats()</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">love_cats</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">love</span><span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="va">love</span><span class="op">==</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"I love cats!"</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="kw">else</span> <span class="op">{</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"I am not a cool person."</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Save this file again. Now, to get the documentation from the comments
in the code above to an actual R documentation file, run:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Do the same for the <code>hooper_kitten</code> function:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Hooper Kitten picture</span></span>
<span><span class="co">#' </span></span>
<span><span class="co">#' Displays the cutest kitten at Cold Spring Harbor</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' hooper_kitten()</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="va">hooper_kitten</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">file_loc</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'images/hooper_kitten.png'</span>, package<span class="op">=</span><span class="st">'CuteCats'</span><span class="op">)</span></span>
<span>    <span class="va">pic</span> <span class="op">=</span> <span class="fu">png</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html" class="external-link">readPNG</a></span><span class="op">(</span><span class="va">file_loc</span><span class="op">)</span></span>
<span>    <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.raster.html" class="external-link">grid.raster</a></span><span class="op">(</span><span class="va">img</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-6-try-it-out">Step 6: Try it out<a class="anchor" aria-label="anchor" href="#step-6-try-it-out"></a>
</h3>
<p>The <code>devtools</code> package includes a nice function to quickly
“load” the package without having to install it, making it convenient
and fast to make changes to the package and test them out.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>And try out the functions.</p>
</div>
<div class="section level3">
<h3 id="step-7-add-a-license">Step 7: Add a license<a class="anchor" aria-label="anchor" href="#step-7-add-a-license"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/licenses.html" class="external-link">use_mit_license</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-8-build-a-pkgdown-site">Step 8: Build a pkgdown site<a class="anchor" aria-label="anchor" href="#step-8-build-a-pkgdown-site"></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/BiocManager/man/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">'pkgdown'</span><span class="op">)</span></span></code></pre></div>
<p>Then, build the site:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">build_site</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The site will end up in the <code>docs</code> directory. We will use
that information to tell GitHub where the website material is
located.</p>
</div>
<div class="section level3">
<h3 id="step-9-add-everything-to-git">Step 9: Add everything to git<a class="anchor" aria-label="anchor" href="#step-9-add-everything-to-git"></a>
</h3>
<p>If you’ve cloned the package from git, no need to do this step.
However, if you created the package from scratch, you’ll want to do this
to add version control to your package.</p>
<p>On the terminal command line, switch into your package directory and
then do:</p>
<pre><code>git init
git add .
git commit -m 'Working package'</code></pre>
</div>
<div class="section level3">
<h3 id="step-10-infinity-iterate-and-improve">Step 10-Infinity: Iterate and improve<a class="anchor" aria-label="anchor" href="#step-10-infinity-iterate-and-improve"></a>
</h3>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Sean Davis.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
